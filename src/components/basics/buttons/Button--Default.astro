---
/**
 * Button--Default
 *
 * A reusable button/link component matching the variant-tab styling.
 * Supports optional icon (via slot), active state, and works as link or button.
 */
interface Props {
  /** URL for link behavior (renders <a>). Omit for <button>. */
  href?: string;
  /** Whether this button is in active/selected state */
  active?: boolean;
  /** Additional CSS classes */
  class?: string;
  /** Button type (only applies when no href) */
  type?: 'button' | 'submit' | 'reset';
  /** Aria label for accessibility */
  'aria-label'?: string;
  /** Data attributes */
  [key: `data-${string}`]: string | undefined;
}

const {
  href,
  active = false,
  class: className = '',
  type = 'button',
  'aria-label': ariaLabel,
  ...rest
} = Astro.props;

// Extract data-* attributes
const dataAttrs = Object.fromEntries(
  Object.entries(rest).filter(([key]) => key.startsWith('data-'))
);

const classes = [
  'btn-default',
  active ? 'active' : '',
  className,
].filter(Boolean).join(' ');
---

{href ? (
  <a href={href} class={classes} aria-label={ariaLabel} {...dataAttrs}>
    <slot name="icon" />
    <slot />
  </a>
) : (
  <button type={type} class={classes} aria-label={ariaLabel} {...dataAttrs}>
    <slot name="icon" />
    <slot />
  </button>
)}

<style>
  .btn-default {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    color: var(--color-foreground);
    opacity: 0.5;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
    text-decoration: none;
    background: transparent;
    border: 1px solid transparent;
    cursor: pointer;
    font-family: inherit;
  }

  .btn-default:hover {
    opacity: 0.8;
    background: rgba(139, 92, 246, 0.1);
  }

  .btn-default.active {
    opacity: 1;
    background: rgba(139, 92, 246, 0.15);
    border: 1px solid rgba(139, 92, 246, 0.3);
  }

  /* Icon sizing - matches w-4 h-4 */
  .btn-default :global(svg) {
    width: 1rem;
    height: 1rem;
    flex-shrink: 0;
  }

  /* Light mode */
  :global([data-mode="light"]) .btn-default:hover {
    background: rgba(108, 99, 255, 0.1);
  }

  :global([data-mode="light"]) .btn-default.active {
    background: rgba(108, 99, 255, 0.1);
    border-color: rgba(108, 99, 255, 0.2);
  }
</style>
