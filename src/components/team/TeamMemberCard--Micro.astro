---
/**
 * TeamMemberCard--Micro Component
 *
 * A compact team member card for dense grids (4+ columns).
 * Features:
 * - Small 64px avatar
 * - Centered layout
 * - Optional pillar/category badge
 * - Minimal footprint for grid layouts
 *
 * Supports light/dark/vibrant visual modes.
 */

export interface PillarBadge {
  label: string;
  color: 'purple' | 'blue' | 'cyan' | 'green' | 'amber';
}

interface Props {
  /** Person's display name */
  name: string;
  /** Job title or role */
  role: string;
  /** Short description (1-2 sentences) */
  description: string;
  /** Path to avatar image */
  image: string;
  /** Optional pillar/category badge */
  pillar?: PillarBadge;
  /** Additional CSS classes */
  class?: string;
}

const {
  name,
  role,
  description,
  image,
  pillar,
  class: className = '',
} = Astro.props;
---

<article class:list={['team-card-micro', className]}>
  <div class="micro-inner">
    <!-- Avatar -->
    <div class="micro-avatar">
      <img
        src={image}
        alt={name}
        class="micro-avatar-img"
        loading="lazy"
      />
    </div>

    <!-- Name -->
    <h3 class="micro-name">{name}</h3>

    <!-- Role -->
    <p class="micro-role">{role}</p>

    <!-- Description -->
    <p class="micro-description">{description}</p>

    <!-- Pillar Badge -->
    {pillar && (
      <span class:list={['micro-pillar', `micro-pillar-${pillar.color}`]}>
        {pillar.label}
      </span>
    )}
  </div>
</article>

<style>
  .team-card-micro {
    /* Card container */
  }

  .micro-inner {
    position: relative;
    padding: 1.5rem;
    border-radius: 0.75rem;
    backdrop-filter: blur(8px);
    transition: all 0.3s ease;
    height: 100%;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .micro-avatar {
    width: 4rem;
    height: 4rem;
    border-radius: 9999px;
    overflow: hidden;
    margin-bottom: 1rem;
    flex-shrink: 0;
  }

  .micro-avatar-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .micro-name {
    font-size: 1.125rem;
    font-weight: 700;
    margin: 0 0 0.25rem 0;
    line-height: 1.3;
  }

  .micro-role {
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin: 0 0 0.75rem 0;
  }

  .micro-description {
    font-size: 0.8125rem;
    line-height: 1.5;
    margin: 0;
    flex-grow: 1;
  }

  .micro-pillar {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.6875rem;
    font-weight: 600;
    margin-top: 1rem;
  }

  /* ==========================================================================
     PILLAR BADGE COLORS
     ========================================================================== */
  .micro-pillar-purple {
    background: rgba(108, 99, 255, 0.15);
    color: var(--color-lilac);
  }

  .micro-pillar-blue {
    background: rgba(96, 165, 250, 0.15);
    color: #93c5fd;
  }

  .micro-pillar-cyan {
    background: rgba(34, 211, 238, 0.15);
    color: #67e8f9;
  }

  .micro-pillar-green {
    background: rgba(52, 211, 153, 0.15);
    color: #6ee7b7;
  }

  .micro-pillar-amber {
    background: rgba(251, 191, 36, 0.15);
    color: #fcd34d;
  }

  /* ==========================================================================
     LIGHT MODE
     ========================================================================== */
  :global([data-mode="light"]) .micro-inner {
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(108, 99, 255, 0.12);
  }

  :global([data-mode="light"]) .micro-inner:hover {
    border-color: rgba(108, 99, 255, 0.3);
    box-shadow: 0 4px 20px rgba(108, 99, 255, 0.08);
  }

  :global([data-mode="light"]) .micro-avatar {
    border: 2px solid rgba(108, 99, 255, 0.2);
  }

  :global([data-mode="light"]) .micro-name {
    color: var(--color-foreground);
  }

  :global([data-mode="light"]) .micro-role {
    color: var(--color-marjorelle-purple);
    opacity: 0.8;
  }

  :global([data-mode="light"]) .micro-description {
    color: var(--color-foreground);
    opacity: 0.6;
  }

  :global([data-mode="light"]) .micro-pillar {
    background: rgba(108, 99, 255, 0.1);
    color: var(--color-marjorelle-purple);
  }

  /* ==========================================================================
     DARK MODE
     ========================================================================== */
  :global([data-mode="dark"]) .micro-inner {
    background: rgba(15, 9, 35, 0.8);
    border: 1px solid rgba(108, 99, 255, 0.2);
  }

  :global([data-mode="dark"]) .micro-inner:hover {
    border-color: rgba(108, 99, 255, 0.5);
    box-shadow: 0 0 40px rgba(102, 67, 226, 0.15);
  }

  :global([data-mode="dark"]) .micro-avatar {
    border: 2px solid rgba(108, 99, 255, 0.3);
  }

  :global([data-mode="dark"]) .micro-name {
    color: var(--color-alabaster);
  }

  :global([data-mode="dark"]) .micro-role {
    color: var(--color-lilac);
    opacity: 0.8;
  }

  :global([data-mode="dark"]) .micro-description {
    color: var(--color-alabaster);
    opacity: 0.6;
  }

  :global([data-mode="dark"]) .micro-pillar {
    background: rgba(108, 99, 255, 0.15);
    color: var(--color-lilac);
  }

  /* ==========================================================================
     VIBRANT MODE
     ========================================================================== */
  :global([data-mode="vibrant"]) .micro-inner {
    background: linear-gradient(135deg, rgba(15, 9, 35, 0.9), rgba(26, 10, 53, 0.8));
    border: 1px solid rgba(108, 99, 255, 0.3);
  }

  :global([data-mode="vibrant"]) .micro-inner:hover {
    border-color: rgba(108, 99, 255, 0.7);
    box-shadow: 0 0 50px rgba(102, 67, 226, 0.25);
  }

  :global([data-mode="vibrant"]) .micro-avatar {
    border: 2px solid rgba(156, 133, 223, 0.5);
    box-shadow: 0 0 15px rgba(102, 67, 226, 0.3);
  }

  :global([data-mode="vibrant"]) .micro-name {
    color: var(--color-alabaster);
  }

  :global([data-mode="vibrant"]) .micro-role {
    color: var(--color-lilac);
    text-shadow: 0 0 10px var(--color-lilac);
  }

  :global([data-mode="vibrant"]) .micro-description {
    color: var(--color-alabaster);
    opacity: 0.7;
  }

  :global([data-mode="vibrant"]) .micro-pillar {
    background: rgba(108, 99, 255, 0.2);
    color: var(--color-lilac);
    box-shadow: 0 0 10px rgba(108, 99, 255, 0.3);
  }
</style>
