---
/**
 * Design System Hub
 *
 * Navigation page for exploring all design system documentation.
 */
import BaseThemeLayout from '@layouts/BaseThemeLayout.astro';

// Define design system pages with metadata
const pages = [
  {
    title: 'Citations',
    href: '/design-system/citations',
    description: 'Hex-code citation system with inline markers, source lists, and wrapper utilities.',
    components: ['InlineCitation', 'Sources', 'SourcesCompact', 'SourcesInline', 'CitedSection'],
    category: 'Components',
  },
  {
    title: 'People',
    href: '/design-system/people',
    description: 'Team member cards in compact and wide variants for grid and narrative layouts.',
    components: ['TeamMemberCard', 'TeamMemberCard--Wide', 'TeamMemberCard--Micro'],
    category: 'Components',
  },
  {
    title: 'Deals',
    href: '/design-system/deals',
    description: 'Pipeline company cards for public and confidential deal flow displays.',
    components: ['DealCard--Micro', 'DealCard--Micro--Confidential'],
    category: 'Components',
  },
  {
    title: 'Messages',
    href: '/design-system/messages',
    description: 'Narrative section components for fund messaging and data visualizations.',
    components: ['TheAgingCrisis', 'AgingPopulation', 'DarkMatterDifferentiation', 'ExitPotential'],
    category: 'Sections',
  },
  {
    title: 'Page Headers',
    href: '/design-system/page-headers',
    description: 'Hero header variants for page tops: centered gradient, split-nav, and compact styles.',
    components: ['PageHeader--Centered', 'PageHeader--SplitNav', 'PageHeader--Compact'],
    category: 'Sections',
  },
  {
    title: 'Vibrant Mode',
    href: '/design-system/vibrant',
    description: 'Showcase of the vibrant visual mode with glows and gradients.',
    components: [],
    category: 'Themes',
  },
  {
    title: 'Flare Demo',
    href: '/design-system/flare-demo',
    description: 'Animated flare and glow effects for visual interest.',
    components: [],
    category: 'Effects',
  },
  {
    title: 'Needs Modes',
    href: '/design-system/needs-modes',
    description: 'Components requiring light/dark/vibrant mode support.',
    components: [],
    category: 'Reference',
  },
];

// Group pages by category
const categories = pages.reduce((acc, page) => {
  if (!acc[page.category]) acc[page.category] = [];
  acc[page.category].push(page);
  return acc;
}, {} as Record<string, typeof pages>);

const categoryOrder = ['Components', 'Sections', 'Themes', 'Effects', 'Reference'];
---

<BaseThemeLayout title="Design System | Dark Matter">
  <main class="design-system-hub">
    <!-- Header -->
    <header class="hub-header">
      <div class="max-w-5xl mx-auto px-6 py-16 text-center">
        <h1 class="text-4xl sm:text-5xl font-bold mb-4">Design System</h1>
        <p class="text-lg text-(--color-muted-foreground) max-w-2xl mx-auto">
          Reusable components, patterns, and visual styles for Dark Matter sites.
          Browse the documentation below.
        </p>
      </div>
    </header>

    <!-- Navigation Grid -->
    <div class="hub-content max-w-5xl mx-auto px-6 pb-16">
      {categoryOrder.map(category => categories[category] && (
        <section class="category-section">
          <h2 class="category-title">{category}</h2>
          <div class="page-grid">
            {categories[category].map(page => (
              <a href={page.href} class="page-card group">
                <div class="page-card-inner">
                  <h3 class="page-title">{page.title}</h3>
                  <p class="page-description">{page.description}</p>
                  {page.components.length > 0 && (
                    <div class="page-components">
                      {page.components.slice(0, 4).map(comp => (
                        <span class="component-tag">{comp}</span>
                      ))}
                      {page.components.length > 4 && (
                        <span class="component-more">+{page.components.length - 4} more</span>
                      )}
                    </div>
                  )}
                  <span class="page-arrow">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                  </span>
                </div>
              </a>
            ))}
          </div>
        </section>
      ))}
    </div>

    <!-- Quick Links -->
    <footer class="hub-footer">
      <div class="max-w-5xl mx-auto px-6 py-8">
        <div class="footer-inner">
          <span class="footer-label">Quick Links</span>
          <div class="footer-links">
            {pages.map(page => (
              <a href={page.href} class="footer-link">{page.title}</a>
            ))}
          </div>
        </div>
      </div>
    </footer>
  </main>
</BaseThemeLayout>

<style>
  .design-system-hub {
    background: var(--color-background);
    min-height: 100vh;
  }

  .hub-header {
    background: linear-gradient(180deg, rgba(156, 133, 223, 0.05) 0%, transparent 100%);
    border-bottom: 1px solid var(--color-border);
  }

  .hub-header h1 {
    color: var(--color-foreground);
  }

  /* Categories */
  .category-section {
    margin-bottom: 3rem;
  }

  .category-title {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--color-lilac);
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--color-border);
  }

  /* Page Grid */
  .page-grid {
    display: grid;
    gap: 1rem;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  }

  /* Page Cards */
  .page-card {
    display: block;
    text-decoration: none;
    border-radius: 0.75rem;
    transition: all 0.2s ease;
  }

  .page-card-inner {
    position: relative;
    padding: 1.5rem;
    border-radius: 0.75rem;
    background: rgba(156, 133, 223, 0.03);
    border: 1px solid rgba(156, 133, 223, 0.1);
    height: 100%;
    transition: all 0.2s ease;
  }

  .page-card:hover .page-card-inner {
    background: rgba(156, 133, 223, 0.08);
    border-color: rgba(156, 133, 223, 0.25);
    transform: translateY(-2px);
  }

  .page-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--color-foreground);
    margin-bottom: 0.5rem;
    transition: color 0.2s ease;
  }

  .page-card:hover .page-title {
    color: var(--color-lilac);
  }

  .page-description {
    font-size: 0.875rem;
    color: var(--color-muted-foreground);
    line-height: 1.5;
    margin-bottom: 1rem;
  }

  /* Component Tags */
  .page-components {
    display: flex;
    flex-wrap: wrap;
    gap: 0.375rem;
  }

  .component-tag {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    font-size: 0.6875rem;
    font-family: monospace;
    color: var(--color-lilac);
    background: rgba(156, 133, 223, 0.1);
    border-radius: 0.25rem;
  }

  .component-more {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    font-size: 0.6875rem;
    color: var(--color-muted-foreground);
  }

  /* Arrow */
  .page-arrow {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    color: var(--color-muted-foreground);
    opacity: 0;
    transform: translateX(-8px);
    transition: all 0.2s ease;
  }

  .page-card:hover .page-arrow {
    opacity: 1;
    transform: translateX(0);
    color: var(--color-lilac);
  }

  /* Footer */
  .hub-footer {
    border-top: 1px solid var(--color-border);
    background: rgba(156, 133, 223, 0.02);
  }

  .footer-inner {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    flex-wrap: wrap;
  }

  .footer-label {
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-muted-foreground);
  }

  .footer-links {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem 1rem;
  }

  .footer-link {
    font-size: 0.875rem;
    color: var(--color-muted-foreground);
    text-decoration: none;
    transition: color 0.15s ease;
  }

  .footer-link:hover {
    color: var(--color-lilac);
  }

  /* Light mode */
  :global([data-mode="light"]) .hub-header {
    background: linear-gradient(180deg, rgba(108, 99, 255, 0.03) 0%, transparent 100%);
  }

  :global([data-mode="light"]) .category-title {
    color: var(--color-marjorelle-purple);
  }

  :global([data-mode="light"]) .page-card-inner {
    background: rgba(108, 99, 255, 0.02);
    border-color: rgba(108, 99, 255, 0.1);
  }

  :global([data-mode="light"]) .page-card:hover .page-card-inner {
    background: rgba(108, 99, 255, 0.05);
    border-color: rgba(108, 99, 255, 0.2);
  }

  :global([data-mode="light"]) .page-card:hover .page-title,
  :global([data-mode="light"]) .page-card:hover .page-arrow {
    color: var(--color-marjorelle-purple);
  }

  :global([data-mode="light"]) .component-tag {
    color: var(--color-marjorelle-purple);
    background: rgba(108, 99, 255, 0.08);
  }

  :global([data-mode="light"]) .footer-link:hover {
    color: var(--color-marjorelle-purple);
  }

  :global([data-mode="light"]) .hub-footer {
    background: rgba(108, 99, 255, 0.02);
  }
</style>
